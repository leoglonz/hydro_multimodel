## General Config -------------------------------#
mode: bmi_forward    # bmi_forward
ensemble_type: none    # none, frozen_pnn, free_pnn
use_checkpoint: False    # See bottom

random_seed: 0
device: cuda
gpu_id: 1

train:
    start_time: 1980/10/01
    end_time: 1995/10/01
test:
    start_time: 1995/10/01
    end_time: 1998/10/01

batch_basins: 25

name: hmm1.1-${observations.name}
# NOTE: Temporarily only using output_dir to load a trained model into BMI.
output_dir: /data/lgl5139/hydro_multimodel/dPLHydro_multimodel/runs/camels_671_dp_2024/saved_models/debug_3/free_pnn/LSTM_E50_R365_B200_H256_n16_0/static_para/HBV_marrmot_PRMS_SACSMA_with_snow_


## BMI Specific Config -------------------------------#
time_step_delta: 1


## Model Config -------------------------------#
pnn_model: LSTM    # LSTM, MLP
hydro_models: [HBV]    # HBV, marrmot_PRMS, SACSMA_with_snow
dy_params:
    HBV: []    # parBETA, parBETAET
    SACSMA: []
    PRMS: []

routing_hydro_model: False
pet_module: dataset    # dataset, potet_hamon, potet_hargreaves
pet_dataset_name: PET_hargreaves(mm/day)
target: ['00060_Mean']    # 00060_Mean, 00010_Mean, BFI_AVE, PET

loss_function: RmseLoss_flow_comb
loss_function_weights:
    w1: 11.0
    w2: 1.0

nmul: 16
warm_up: 365
rho: 365 
batch_size: 200
epochs: 50
dropout: 0.5
hidden_size: 256
learning_rate: 1
nearzero: 1e-5

save_epoch: 10

weighting_nn:
    dropout: 0.5
    hidden_size: 256
    learning_rate: 0.01
    method: sigmoid
    loss_function: RmseLoss_flow_comb
    loss_function_weights:
        w1: 11.0
        w2: 1.0
    loss_factor: 15
    loss_lower_bound: 0.9
    loss_upper_bound: 1.1



## Model Checkpoints -------------------------------#
checkpoint:
    start_epoch: 11
    HBV: /data/lgl5139/hydro_multimodel/dPLHydro_multimodel/runs/camels_671_dp/saved_models/free_pnn/LSTM_E50_R365_B100_H256_n2_0/static_para/HBV_/HBV_model_Ep10.pt
    marrmot_PRMS: /data/lgl5139/hydro_multimodel/dPLHydro_multimodel/runs/camels_671_dp/saved_models/free_pnn/LSTM_E50_R365_B100_H256_n2_0/static_para/HBV_/marrmot_PRMS_model_Ep10.pt
    SACSMA_with_snow: /data/lgl5139/hydro_multimodel/dPLHydro_multimodel/runs/camels_671_dp/saved_models/free_pnn/LSTM_E50_R365_B100_H256_n2_0/static_para/HBV_/SACSMA_with_snow_model_Ep10.pt
    weighting_nn: /data/lgl5139/hydro_multimodel/dPLHydro_multimodel/runs/camels_671_dp/saved_models/free_pnn/LSTM_E50_R365_B100_H256_n2_0/static_para/HBV_/wtNN_model_model_Ep10.pt


## Observations -------------------------------#
observations:
    name: conus_3000
    gage_info: None
    forcing_path: /scratch/lgl5139/data/conus/conus.feather
    forcing_path: /scratch/lgl5139/data/conus/attr_conus.feather

    var_t_nn: [
    'prcp(mm/day)',
    'tmean(C)',
    'PET_hargreaves(mm/day)'
    ]
    var_c_nn: [
    'p_mean',
    'pet_mean',
    'p_seasonality',
    'frac_snow',
    'aridity',
    'high_prec_freq',
    'high_prec_dur',
    'low_prec_freq',
    'low_prec_dur',
    'elev_mean',
    'slope_mean',
    'area_gages2',
    'frac_forest',
    'lai_max',
    'lai_diff',
    'gvf_max',
    'gvf_diff',
    'dom_land_cover_frac',
    'dom_land_cover',
    'root_depth_50',
    'soil_depth_pelletier',
    'soil_depth_statsgo',
    'soil_porosity',
    'soil_conductivity',
    'max_water_content',
    'sand_frac',
    'silt_frac',
    'clay_frac',
    'geol_1st_class',
    'glim_1st_class_frac',
    'geol_2nd_class',
    'glim_2nd_class_frac',
    'carbonate_rocks_frac',
    'geol_porosity',
    'geol_permeability'
    ]
    var_t_hydro_model: [
    'prcp(mm/day)',
    'tmean(C)',
    'tmax(C)',
    'tmin(C)',
    'PET_hargreaves(mm/day)'
    ]
    var_c_hydro_model: [
    'DRAIN_SQKM',
    'lat'
    ]
